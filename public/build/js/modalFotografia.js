const idFoto=document.getElementById("idFoto"),listadoFotografiasDOM=document.getElementById("listadoFotografias"),botonAtrasDOM=document.querySelector("#botonAtras"),botonSiguienteDOM=document.querySelector("#botonSiguiente"),informacionPaginaDOM=document.querySelector("#informacionPaginas"),modal=document.getElementById("ventanaModal"),elementosPorPagina=15;let paginaActual=1,totalFotos=0,fotos=[];function iniciarModal(){botonAtrasDOM.addEventListener("click",retrocederPagina),botonSiguienteDOM.addEventListener("click",avanzarPagina);var t=document.getElementById("abrirModalFoto"),e=document.getElementsByClassName("close")[0];t.addEventListener("click",(function(t){t.preventDefault,modal.style.display="block",renderizar()})),e.addEventListener("click",(function(){modal.style.display="none"})),window.addEventListener("click",(function(t){t.target==modal&&(modal.style.display="none")}))}function avanzarPagina(){paginaActual+=1,renderizar()}function retrocederPagina(){paginaActual-=1,renderizar()}async function obtenerFotografias(t=1){const e=15*(paginaActual-1),a=new FormData;a.append("registros",15),a.append("inicio",e);try{const t="/admin/api/obtenerFotografias",e=await fetch(t,{method:"POST",body:a}),n=await e.json();if(n)return n}catch(t){console.log(t)}}async function renderizar(){listadoFotografiasDOM.innerHTML="";const t=await obtenerFotografias(paginaActual),e=await obtenerPaginasTotales();gestionarBotones(e),informacionPaginaDOM.textContent=`${paginaActual}/${e}`,t.forEach(t=>{const e=document.createElement("DIV"),a=document.createElement("IMG"),n=document.createElement("DIV"),o=document.createElement("BUTTON");e.classList.add("contienefoto"),n.classList.add("fotoOpciones"),o.classList.add("boton"),t.id===idFoto.value&&a.classList.add("foto_selected"),o.innerHTML="Seleccionar",o.onclick=function(e){e.preventDefault(),idFoto.value=t.id,modal.style.display="none"},n.appendChild(o),a.setAttribute("src",t.carpeta),a.classList.add("adminFoto"),a.setAttribute("id",t.id),e.appendChild(a),e.appendChild(n),listadoFotografiasDOM.appendChild(e)})}function gestionarBotones(t){1===paginaActual?botonAtrasDOM.setAttribute("disabled",!0):botonAtrasDOM.removeAttribute("disabled"),paginaActual===t?botonSiguienteDOM.setAttribute("disabled",!0):botonSiguienteDOM.removeAttribute("disabled")}async function obtenerPaginasTotales(){try{const t="/admin/api/obtenerFotosTotales",e=await fetch(t,{method:"POST"}),a=await e.json();if(a)return Math.ceil(a/15)}catch(t){console.log(t)}}document.addEventListener("DOMContentLoaded",(function(){iniciarModal()}));